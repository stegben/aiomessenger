language: python

cache: pip

python:
- '3.5'
- '3.6'
- 'nightly'

matrix:
  allow_failures:
  - python: 'nightly'

before_install:
  - sudo apt-get update
  - sudo apt-get install pandoc -y
  - pip install pipenv codecov

install:
- pipenv install --dev

script:
- pipenv run make lint
- pipenv run make test

deploy:
  provider: pypi
  user: stegben
  password:
    secure: GNnMSteiQC94d7GGYL6FCizJMbomBjlzQMxDsLQQFlCPp2T5cmOpLWU0yaah+RZ222CB9T3jAa6XEpdL1hDZzYf7UnCsiW6crK2S9PvySz90yReed1VSoIsOAinoqqQW59ACQ/7OZlLkzeb32R+gr2+yl1HJDeNuMGBk3bw639H9AgBSFsAHdCddU3Em2YDvnpIxOI/pYfwOij5zADCtjwgjw25+5IkNNZ8loVUJdl8CKYRYuG8WMktl6wEmqEqK17s/N6+9ZqQuYLEtNwx9ZnPEukbooab6gWdyGIviouQdJ9H1dhf0GXv5qVsuBL09IHWovpGALu+RJ/t/5NCNzeiB6q6LcfzUwU+J1S5GSb29ik7F3Ba+OEfNJ0h4DfejHuvYKDzyK/oYfzcSkhM5vgxU6IpqilJbASMv1/3TEsbf0HM0nOuPOMhWjbPLjwnrBoY8A8NJWz6zafXjfM+mraUbuIGg5CZu6qmIFGnIXxXxx4oWNdPuQ522bZR1oTO/WmGz7/vNf3d42vMiwHXo8i7glXISYtbvaD7sLUBsRimxzodiG6Hr3bombz/e+Tb3D0iW8T2zm36UaYXUiUf1CRr6VbTHZhnsnovrnu0mesHKxu1THy/ZzvByGmduXZUEf0TGaXIXPu7MK11zc7n0vfpOyg8vfVE2cVosUBDymuY=
  distributions: sdist
  skip_upload_docs: true
  skip_cleanup: true
  on:
    tags: true
    python: 3.6

after_success:
  - codecov
